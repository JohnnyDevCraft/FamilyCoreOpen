@using System.Linq.Expressions
@using System.Threading.Tasks
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Forms

<div class="mb-4">
  <label class="inline-flex items-center text-sm text-[color:var(--color-text-muted-dark)]">
    <InputCheckbox Value="Value"
                   ValueChanged="OnInternalChanged"
                   ValueExpression="ValueExpression"
                   class="h-4 w-4 rounded border-gray-300 text-[color:var(--color-primary-500)] focus:ring-[color:var(--color-primary-400)]"
                   disabled="@Disabled" />
    <span class="ml-2">@LabelText</span>
  </label>
</div>

@code {
    [Parameter] public string LabelText { get; set; } = "";
    [Parameter] public bool Disabled { get; set; }

    [Parameter] public bool Value { get; set; }
    [Parameter] public EventCallback<bool> ValueChanged { get; set; }
    [Parameter] public Expression<Func<bool>> ValueExpression { get; set; }

    Task OnInternalChanged(bool newValue)
    {
        Value = newValue;
        return ValueChanged.InvokeAsync(newValue);
    }
}
