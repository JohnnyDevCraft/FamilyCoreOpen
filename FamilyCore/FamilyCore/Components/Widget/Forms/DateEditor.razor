@using System
@using System.Linq.Expressions
@using System.Threading.Tasks
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Forms

<div class="mb-4">
  <label class="block text-sm mb-1 text-[color:var(--color-text-muted-dark)]">@LabelText</label>
  <InputDate TValue="DateTime?" Value="Value" ValueChanged="OnInternalChanged" ValueExpression="ValueExpression"
             class="w-full px-3 py-2 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[color:var(--color-primary-400)]"
             placeholder="@PlaceholderText"
             disabled="@Disabled" />
</div>

@code {
    [Parameter] public string LabelText { get; set; } = "";
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public string PlaceholderText { get; set; } = "";

    [Parameter] public DateTime? Value { get; set; }
    [Parameter] public EventCallback<DateTime?> ValueChanged { get; set; }
    [Parameter] public Expression<Func<DateTime?>> ValueExpression { get; set; }

    Task OnInternalChanged(DateTime? newValue)
    {
        Value = newValue?.Date;
        return ValueChanged.InvokeAsync(Value);
    }
}
